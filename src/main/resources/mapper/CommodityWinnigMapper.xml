<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="com.example.other.mapper.CommodityWinnigMapper">
    <resultMap id="commodityWinnigMap" type="com.example.other.entity.CommodityWinnigEntity">
        <id column="id" property="id"/>
        <result property="userId" column="u_id"/>
        <result property="commodityId" column="c_id"/>
        <result property="addressId" column="address_id"/>
        <result property="platform" column="platform"/>
        <result property="number" column="number"/>
        <result property="status" column="status"/>
        <result property="gold" column="gold"/>
        <result property="statusC" column="status_c"/>
        <result property="creationTime" column="c_time"/>
        <result property="updateTime" column="u_time"/>
        <result property="name" column="name"/>
        <result property="tel" column="tel"/>
        <result property="province" column="province"/>
        <result property="city" column="city"/>
        <result property="county" column="county"/>
        <result property="addressDetail" column="address_detail"/>
        <result property="areaCode" column="area_code"/>
        <result property="postalCode" column="postal_code"/>
        <result property="userName" column="user_name"/>
        <result property="commodityIntro" column="commodity_intro"/>
        <result property="commodity" column="commodity"/>
        <result property="imgPath" column="img_path"/>
        <result property="price" column="price"/>
        <result property="goldP" column="gold_p"/>
    </resultMap>

    <select id="pageList" resultType="com.example.other.entity.CommodityWinnigEntity">
        SELECT
        b1.*,
        b2.user_name,
        b4.NAME,
        b4.tel,
        b4.province,
        b4.city,
        b4.county,
        b4.address_detail,
        b4.area_code,
        b4.postal_code,
        b3.commodity_intro,
        b3.commodity,
        b3.img_path,
        b3.price,
        b3.gold AS gold_p
        FROM
        `c_winning` b1
        LEFT JOIN `user` b2 ON b1.user_id = b2.id
        LEFT JOIN c_commodity b3 ON b1.commodity_id = b3.id
        LEFT JOIN u_address b4 ON b1.address_id = b4.id
        <where>
            <if test="entity!=null and entity.userId!=null">
                b1.user_id= #{entity.userId}
            </if>
            <if test="entity!=null and entity.status">
                b1.status = #{entity.status}
            </if>
        </where>
    </select>
</mapper>